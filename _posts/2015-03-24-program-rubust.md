---
layout: default
title: 从一件小事谈程序设计与实现中的极端情况
comments: true
---

## 缘起
昨天早上上班，电梯里进了一堆人之后，报超重。下去一个人后，闪了两下超重好了，于是，关门上楼。可刚刚到2楼就显示超重了。这是按照一般情况下的电梯逻辑，应该是在2楼停车开门，下去一两个人，不超重之后，继续运行。可问题是，这栋大厦一楼到七楼是卖场，这也导致在设计的时候从2楼到6楼，写字楼电梯统统没有出口。于是，停在2楼的电梯因为没有出口而打不开门，直接停在了那里，困住了。直到救援到来。
## 问题
其实上述电梯问题，是一个很傻B的问题。一部电梯的数控系统，在编写它的时候，就应该考虑到各种极端情况，例如重量正好在临界点，又如某些楼层并没有出口，等等。那么，这次遇到的这种问题，其实不难解决，仅仅是听到这个事情，相信做程序员的你已经想到问题解决办法了吧？我想到了两种最简单的：

1. 当某一层楼不存在出口的时候，让电梯到最近一层的出口停车。
2. 让电梯停车状态的测重标准，比运行状态的测重标准低20公斤。

好吧，这个事情如此简单，可为什么数控电梯诞生了这么多年了，这么傻B的问题仍然存在于电梯之上呢？这是个值得深思的问题。原因无非两种：第一是电梯厂家根本就是利用别家生产的数控芯片，其中根本就不存在完善的电梯数控程序，或者，这玩意里面的程序还是N年前的。第二是数控程序的开发厂商，**急功近利**！

互联网+时代即将到来，我们身边的一切，都会和它们越来越紧密，到处都是运行着的各种程序，可是，如果生产厂商都如此急功近利，你能接受下面描述的生活吗：

早上起床，打开你的早餐机，然后去洗脸刷牙，收拾停当准备吃早餐的时候，发现那锅灶死机了，关不掉火，你不得不直接拔掉电源。

吃完早餐，把碗盘扔给洗碗机，激活你的家务机器人，让它满地扫地去，然后去上班。

尽管早上你出门很早，可是还是迟到了，因为你乘坐的公车，被一辆自动驾驶系统出错的本田雅阁8代给撞了，公车损失不大，但也必须停运一段时间了。

好不容易到了公司楼下，电梯又故障了，你被困在电梯里半小时。等你走进办公室时，你已经错过了早上要进行的项目会议。

一上午过去，午餐时间来临，你通过外卖订了一份回锅肉盖饭，对付一口吧。可送餐的小弟把饭送来的时候，却发现他送来的是一份麻婆豆腐盖饭。而你最讨厌吃豆腐！经过核实，发现是系统数据紊乱搞错了订单。送餐小弟急忙赔礼并承诺给你另做一份，一小时后，饥肠辘辘的你终于等到了你的午餐，可上班时间也快到了。

急忙把午餐扒到嘴里，准备开始下午的工作，却在签到系统前碰了壁。那个虹膜签到系统不知道怎么想的，把你的瞳孔给认成了客服小张。试过几次都是这样，你无奈把小张叫来，让他试试，这次他辨认对了。 -_-! 好不容易正确辨识了你的瞳孔。你看一眼时间，迟到2分钟。

一下午你都在咒骂那该死的打卡机，咒骂那傻缺一样的自动驾驶系统，咒骂那编写电梯控制系统的混蛋。终于一天的工作结束，你拖着疲惫的身心回到家里，却发现你那个可怜的家务机器人还在不停的忙着清理，原因是地面上全都是水，而那个智能洗碗机，已经快把碗盘洗成粉碎了，却仍然认为碗盘并没有洗好。

月底，你收到了账单：本月电费1306.8元，水费2465.4元……你恨恨地把那些所谓的智能家电全部扔到了回收站，并发誓永远不再用那些破玩意。

可是，在这个连电灯上都是智能灯泡的时代，你能找到那些古董级的家电吗？

记得2004年，曾经有一篇文章讲述F-22战机的航电系统空中宕机，导致飞行员必须在空中重启战机系统的事情，那片文章的结尾，作者曾经说“程序开发是否认真严谨，关系着你我会不会某一天随着一声巨响和蘑菇云被从地球上抹掉，我不是在开玩笑！”

个人对这句话，十分赞同！
